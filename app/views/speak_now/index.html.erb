<h1>Speak Now</h1>
<div class="row" style="margin-bottom: 50px;">
	<div class="col-md-6">
		<div class="card shadow" style="height: 470px;">
			<!-- Card Header - Dropdown -->
			<div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
				<h6 class="m-0 font-weight-bold text-primary">Questions for speaking</h6>
				<button class="btn btn-sm btn-primary">Refresh</button>
			</div>
			<!-- Card Body -->
			<div class="card-body">
				Dropdown menus can be placed in the card header in order to extend the functionality
				of a basic card. In this dropdown card example, the Font Awesome vertical ellipsis
				icon in the card header can be clicked on in order to toggle a dropdown menu.
			</div>
		</div>
	</div>
	<div class="col-md-6">
		<div class="card shadow" style="height: 470px;">
			<div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
				<a class="btn btn-sm btn-primary" href="<%= start_speaking_path %>" data-remote="true" id="start-speaking-btn">Start Session</a>
				<button class="btn btn-sm btn-danger" id="stop-video-btn">End Session</button>

				<div id="speaking-status" style="width: 120px;text-align: right;font-size: 18px;"></div>
			</div>
			<div class="card-body text-center d-flex align-items-center" id="speak-now-outer">
				<% if !params[:call].nil? and params[:call] == "true" and !current_user.partner_token.nil? and current_user.partner_token_expiry > Time.now %>
				<div data-controller='video-chat'
				data-video-chat-session="<%= session.id %>"
				data-video-chat-id="<%= current_user.partner_token %>" class="w-100 h-100" style="max-width: 600px;max-height: 800px;margin: 0 auto;position: relative;">
				<div data-target='video-chat.remote_videos' class="w-100 h-100 remote-video-outer">
					<img src="<%= image_url("searching_user.gif") %>" class="w-100 h-100 loading-user">
				</div>
				<video data-target='video-chat.local_video' autoplay style="width: 128px; height: 72px;position: absolute;bottom: 0px;right: -16px;"></video>
			</div>
			<% else %>
			<h4>Press the start session button to start practicing english speaking</h4>
			<% end %>
		</div>
	</div>
</div>
</div>
<script type="text/javascript">
	$("#stop-video-btn").hide();
</script>